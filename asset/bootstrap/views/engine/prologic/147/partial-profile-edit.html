<div data-ctrl-account="" data-ng-init="disableNavigation = true">
  <button class="hidden" data-gsn-modal="getThemeUrl('/views/engine/modal-account-update-message.html')" data-ng-click="showModal()" data-show-if="profileStatus.profileUpdated || validLoyaltyCard.Updated">
  </button>
  <form data-ng-submit="updateProfile()" name="myForm" role="form">
    <div class="row profileInfo">
      <div class="col-md-6">
        <div class="form-group">
          <label for="firstname">
            First Name:
          </label>
          <input class="form-control" data-ng-model="profile.FirstName" data-ng-required="true" name="firstname" placeholder="Enter first name" type="text"/>
        </div>
        <div class="form-group">
          <label for="lastname">
            Last Name:
          </label>
          <input class="form-control" data-ng-model="profile.LastName" data-ng-required="true" name="lastname" placeholder="Enter last name" type="text"/>
        </div>
        <div class="form-group" data-ng-if="!isFacebook">
          <label for="email">
            Email address:
          </label>
          <input class="form-control" data-gsn-valid-user="required" data-ng-model="profile.Email" data-ng-required="true" name="email" placeholder="Enter email address" type="email"/>
          <p class="help-block" data-ng-show="myForm.email.$error.gsnValidUser">
            Email is invalid or not available.
          </p>
        </div>
      </div>
      <div class="col-md-6">
        <div class="form-group">
          <label for="username">
            Username:
          </label>
          <input class="form-control" data-gsn-valid-user="" data-ng-model="profile.UserName" name="username" placeholder="Enter username" type="text"/>
          <p class="help-block" data-ng-show="myForm.username.$error.gsnValidUser">
            Username is invalid or not available.
          </p>
        </div>
        <div class="form-group cardInfo">
          <label for="rewardcard">
            {{ChainName}} Rewards Card:
            <span data-ng-show="myForm.rewardcard.$invalid">
            </span>
            <span data-ng-show="myForm.rewardcard.$valid">
            </span>
          </label>
          <input class="form-control" data-ng-maxlength="11" data-ng-minlength="11" data-ng-model="profile.ExternalId" data-ng-required="false" name="rewardcard" numbers-only="numbers-only" placeholder="Enter rewards card number" type="text"/>
          <ul data-ng-show="myForm.rewardcard.$viewValue">
            <li data-ng-show="myForm.rewardcard.$viewValue.length != 11">
              Must be 11 digits.
            </li>
          </ul>
          <p>
            When entering your card number, please use only the first 11 digits of the card number, leaving off the last digit. Do not use any spaces or dashes when entering the card number.
          </p>
        </div>
        <br/>
        <div class="form-group" data-ng-include="getThemeUrl('/views/engine/prologic/147/rewardcard-balance.html')" data-ng-show="validLoyaltyCard.isValidLoyaltyCard">
        </div>
        <div class="form-group" data-ng-show="!validLoyaltyCard.isValidLoyaltyCard && myForm.rewardcard.$viewValue.length == 11">
          <p style="color: red;">
            Card number not valid. Please enter correct card number.
          </p>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6">
        <div class="checkbox">
          <label for="receiveemail">
            <input data-ng-model="profile.ReceiveEmail" name="receiveemail" type="checkbox">
              Receive Weekly Email - Yes, I'd like to receive specials, recipe of the week, events, coupon savings, weekly circular, and featured articles.
            </input>
          </label>
          <p class="help-block">
            <a data-ng-href="/privacy">
              Privacy Policy
            </a>
          </p>
        </div>
        <div class="form-group" data-ng-class="{'has-success': !myForm.primarystoreid.$invalid, 'has-error': myForm.primarystoreid.$invalid}">
          <label for="primarystoreid">
            Choose a store:
          </label>
          <br/>
          <select class="form-control" data-ng-model="profile.PrimaryStoreId" data-ng-options="store.StoreId as store.StoreName for store in stores" data-ng-required="true" name="primarystoreid">
            <option value="">
              -- choose a store --
            </option>
          </select>
        </div>
      </div>
    </div>
    <div class="col-md-12">
      <div class="form-group profileButtons">
        <div data-gsn-spinner="{radius:30, width:8, length: 16}" data-show-if="isSubmitting">
        </div>
        <button class="btn btn-default btnSilver" data-ng-click="goBack()" tabindex="-1" type="button">
          Cancel
        </button>
        <button class="btn btn-default btnSilver" type="submit">
          Update
        </button>
        <button class="btn btn-default btnSilver" data-gsn-modal="getThemeUrl('/views/engine/modal-change-password.html')" data-ng-click="showModal()" type="button">
          Change Password
        </button>
      </div>
    </div>
  </form>
</div>
